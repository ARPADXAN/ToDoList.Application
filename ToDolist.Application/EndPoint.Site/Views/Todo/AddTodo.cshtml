
@{
    Layout = null;
}



<!DOCTYPE html>
 <html>
      <head>
              <meta charset="utf-8">
           <meta name="viewport" content="width=device-width, initial-scale=1">
           <title>اضافه کردن وظیفه</title>
           <link href="~/sitetemplate/css/stylemodal.css" rel="stylesheet" />
           <link rel="stylesheet" href="https://unpkg.com/@@majidh1/jalalidatepicker/dist/jalalidatepicker.min.css">
           <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
           <script src="~/sweetalert/sweetalert2.all.js"></script>
           <script src="~/sweetalert/sweetalert2.all.min.js"></script>
           <script src="~/sweetalert/sweetalert2.js"></script>
           <link href="~/sweetalert/sweetalert2.css" rel="stylesheet" />
           <link href="~/sweetalert/sweetalert2.min.css" rel="stylesheet" />

     </head>
     <body>

    
             <div class="row  ">
     <div class="col-lg-12  d-flex justify-content-center " >
         <form  dir="rtl" id="form">
             <div class="row">
                 <div class="col-lg-6">   
                     <div class="fom-group">
                        <input placeholder="همکاری با سامان" name="Title" id="txtTitle" class="form-control"  autofocus/>
                     </div>
                 </div>
                 <div class="col-lg-6">
                    <div class="fom-group">
                      <select class="form-control" name="priorityId"  id="priorityId"   asp-items="@ViewBag.priority">
                          <option value="0" disabled selected>نوع الویت مورد نظرت انتخاب کن</option>
                      </select>
                    </div>
                 </div>
             </div>
             <div class="form-group">
                   <textarea  class="form-control Inputs"  placeholder="توضیحات" name="Description" id="txtDescription" ></textarea>
             </div>
             <div class="form-group">
                 <label>میخوای برات یادآوری کنم؟
                     <input type="checkbox" name="HaveNofication" value="true"  id="myCheck"  data-step='1' onclick="myFunction()"/>
                 </label>
              
             </div>
             <div class="row">
                  <div class="col-md-6" id="function1_1">   
                    <div class="fom-group">
                    <input   id="txtNoficationDate" name="NoficationDate"  data-jdp placeholder="امروز" data-jdp-min-date="today" data-step='1'  class="form-control"   style="display:none" readonly/>
                  </div>
             </div>
                <div class="col-md-6" id="function1_2">
                   <div class="fom-group">
                       <input  id="txtNoficationTime" name="NoficationTime"   data-jdp placeholder="زمان" data-jdp-only-time data-step='1' class="form-control"   style="display:none" readonly/>
                   </div>
             </div>
             </div>
             <div >
                   <input  onclick="SubmitEvent()" value="اضافه کن" onc class="btn btn-primary" />
             </div>
             <div >
                 <input type="submit" style="" value="لازم نیست" id="cancel" class="btn btn-warning" />
             </div>
         </form>

     </div>
     </div>

         



             <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
             <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
             <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.3/js/bootstrap.min.js" integrity="sha512-1/RvZTcCDEUjY/CypiMz+iqqtaoQfAITmNSJY17Myp4Ms5mdxPS5UV7iOfdZoxcGhzFbOm6sntTKJppjvuhg4g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
             <script type="text/javascript" src="https://unpkg.com/@@majidh1/jalalidatepicker/dist/jalalidatepicker.min.js"></script>
<script>
          jalaliDatepicker.startWatch({
            minDate: "attr",
            maxDate: "attr",
            minTime: "attr",
            maxTime: "attr",
            persianDigits: true,
            changeMonthRotateYear: true,
            showTodayBtn: true,
            showEmptyBtn: true,
            topSpace: 10,
            bottomSpace: 30,
            dayRendering(opt,input){
                return {
                    isHollyDay:opt.day==1
                }
            }
        });

        document.getElementById("aaa").addEventListener("jdp:change", function (e) { console.log(e) });
</script>
<script>
function myFunction() {
  var checkBox = document.getElementById("myCheck");
  var input1 = document.getElementById("txtNoficationDate");
  var input2 = document.getElementById("txtNoficationTime");
  if (checkBox.checked == true){
    input1.style.display = "block";
    input2.style.display = "block";
  } else {
     input1.style.display = "none";
     input2.style.display = "none";
  }var data = $("#form").serialize();
}
</script>
        <script>

                    function SubmitEvent() {
                swal.fire({
                    title: 'ثبت وظیفه',
                    text: "اگه انجامش میدی برات اضافه کنم؟",
                    icon: 'info',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'اره بابا انجامش میدم',
                    cancelButtonText: 'نه نمیتونم'
                }).then((result) => {
                    if (result.value) {
                     var data1 = new FormData();
                     var data2 = $("#form").serialize();
                     data1.append("priorityId", $("#priorityId").val());

                        $.ajax({
                            contentType: 'application/x-www-form-urlencoded',
                            dataType: 'json',
                            type: "POST",
                            url: "AddTodo",
                            data: data1,
                            data: data2,
                            success: function (data) {
                                if (data.isSuccess == true) {
                                    swal.fire(
                                        'موفق!',
                                        data.message,
                                        'success'
                                    ).then(function (isConfirm) {
                                        location.reload();
                                    });


                                }
                                else {

                                    swal.fire(
                                        'هشدار!',
                                        data.message,
                                        'warning'
                                    ) ;

                                }
                            },
                            error: function (request, status, error) {
                                alert(request.responseText);
                            }

                        });

                    }
                })
            }



        </script>
             

     </body>
 </html>