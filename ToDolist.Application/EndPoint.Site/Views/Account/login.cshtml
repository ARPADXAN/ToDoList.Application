
@{
    Layout = null;
}


<!DOCTYPE html>
<html dir="rtl">

<head>
    <link href="~/sitetemplate/css/stylelogin.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="~/waitme/waitme.min.css" rel="stylesheet" />
    <link href="~/sweetalert/sweetalert2.css" rel="stylesheet" />
    <link href="~/sweetalert/sweetalert2.min.css" rel="stylesheet" />
</head>

<body>
    <div class="main">
        <input type="checkbox" id="chk" aria-hidden="true">

        <div class="signup">
         
                <form id="signup"  >
                    <div class="form-group">
                            <label for="chk" aria-hidden="true">فرم ثبت نام</label>
                    </div>
                    <div class="form-group" style="height">
                            <input type="text" name="firstName" id="FirstName" placeholder="نام"  style="font-family:'Vazirmatn', sans-serif ;">
                            <span   class="field-validation-error" ></span>
                    </div>
                    <div class="form-group">
                            <input type="text" name="lastName" id="LastName" placeholder="نام خانوادگی"  style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error"  ></span>
                    </div>
                    <div class="form-group">
                            <input type="text" name="mobile" id="Mobile"  placeholder="شماره موبایل" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error" ></span>
                    </div>
                    <div class="form-group">
                            <input type="text" name="email" id="Email" placeholder="ایمیل" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error" ></span>
                    </div>
                    <div class="form-group">
                            <input type="password" name="password" id="Password"  placeholder="کلمه عبور" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error" ></span>
                    </div>
                    <div class="form-group">
                            <input type="password" name="confirmPassword" id="ConfirmPassword"  placeholder="تکرار کلمه عبور" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error"></span>
                    </div>
                    <div>
                            <input type="submit"   value="ثبت نام" id="submit" style="font-family:'Vazirmatn', sans-serif ;">

                    </div>
                </form>

        
        </div>

      <div class="login" >
            
                <form id="login"  >
                    <div class="form-group">
                            <label id="registerafter" for="chk" aria-hidden="true" >فرم ورود</label>
                    </div>


                    <div class="form-group">
                            <input type="text" name="mobile" id="Mobilelogin"  placeholder="شماره موبایل" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error" ></span>
                    </div>

                    <div class="form-group">
                            <input type="password" name="password" id="Passwordlogin"  placeholder="کلمه عبور" style="font-family:'Vazirmatn', sans-serif ;">
                            <span  class="field-validation-error" ></span>
                    </div>

                    <div>
                            <input type="submit" onclick="login()"   value=" ورود" id="submit" style="font-family:'Vazirmatn', sans-serif ;">

                    </div>  
                    <div id="forget">
                            <a >فراموش کردن کلمه عبور</a>
                    </div>
                </form>


        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="~/waitme/waitme.min.js"></script>
    <script src="~/sweetalert2/sweetalert2.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/sweetalert/sweetalert2.all.js"></script>
    <script src="~/sweetalert/sweetalert2.all.min.js"></script>
    <script src="~/sweetalert/sweetalert2.js"></script>
    <script>

        //validation with jquery
        //after submit register
        const btn = document.getElementById("registerafter")
        //wait me librarry
        function startloading(element = 'body') {
    $(element).waitMe({
        effect: 'stretch',
        text: 'صبر کن!',
        bg: 'rgba(255, 255, 255, 0.7)',
        color: '#000' 
        });
}
       function closeloading(element = 'body') {
    $(element).waitMe('hide');

}
  $('#signup').validate({
      rules: {
        firstName: {
                required: true,
                minlength: 2,
                maxlength:40,
            },
        lastName: {
            required: true,
            minlength: 2,
        },          
        mobile: {
            required: true,
            minlength: 10,
            number: true,

        }
        ,email: {
            required: true,
            minlength: 6,
            email:true,
        }
        ,password: {
            required: true,
            minlength: 6,
        }
        ,confirmpassword: {
            required: true,
            minlength: 6,
        },
    },
    messages: {
        firstName: {
                required: "  فیلد نام الزامی است",
                minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد"),
                maxlenght:"نمیتواند بیشتر {0} باشد"
            },
        lastName: {
            required: "  فیلد نام خانوادگی الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد")

        },          
        mobile: {
            required: "  فیلد موبایل الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد"),
            number:"فرمت موبایل صحیح نیست"
        },
         email: {
            required: "  فیلد ایمیل الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد"),
            email: "فرمت ایمیل صحیح نیست"

        },
         password: {
            required: "  فیلد کلمه عبور الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد")
        },
         confirmpassword: {
            required: "  فیلد تکرار کلمه عبور  الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد")
        },

    },
    

    submitHandler:    function Registeruser() {
        var FirstName = $("#FirstName").val();
        var LastName = $("#LastName").val();
        var Email = $("#Email").val();
        var Mobile = $("#Mobile").val();
        var Password = $("#Password").val();
        var ConfirmPassword = $("#ConfirmPassword").val();

        var postData = {
            'FirstName': FirstName,
            'LastName': LastName,
            'Mobile': Mobile,
            'Email': Email,
            'Password': Password,
            'ConfirmPassword': ConfirmPassword,

        };
                    startloading();

        $.ajax({
            contentType: 'application/x-www-form-urlencoded',
            dataType: 'json',
            type: "POST",
            url: "Register",
            data: postData,
            success: function (data) {

                closeloading();
              if (data==="isuccess") {
                   swal.fire(
                       'ثبت نام با موفقیت انجام شد به فرم ورود منتقل می شوید!!',
                       data.message,
                       'success'
                   ).then(function (isConfirm) {
                   document.getElementById("signup").reset()
                          btn.click()

                    });


               }
               else {
                     closeloading();

                   swal.fire(
                       'خطا در ثبت نام!',
                       data.message,
                       'warning'
                   ) ;

               }
            },
            error: function (request, status, error) {
                closeloading();
                swal.fire(
                    'هشدار!',
                    request.responseText,
                    'warning'
                );
            }
        });
    }
})


</script>

    <script>
    $('#login').validate({
         rules: {          
        mobile: {
            required: true,
            minlength: 10,
            number:true,
        }
        ,password: {
            required: true,
            minlength: 6,
        }
    },
    messages: {
          
        mobile: {
            required: "  فیلد موبایل الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد"),
            number: ("فرمت موبایل صحیح نیست")

        },
         password: {
            required: "  فیلد کلمه عبور الزامی است",
            minlength: jQuery.validator.format("نمی تواند کمتر از {0} باشد")
        },


    },

   submitHandler:  function login() {

        var Mobile = $("#Mobilelogin").val();
        var Password = $("#Passwordlogin").val();
        var postData = {
            'Mobile': Mobile,
            'Password': Password,

        };
          startloading();

        $.ajax({
            contentType: 'application/x-www-form-urlencoded',
            dataType: 'json',
            type: "POST",
            url: "Login",
            data: postData,
            success: function (data) {
                if (data === "isuccess") {
                    swal.fire(
                        'موفق!',
                        data.message,
                        'success'
                    ).then(function (isConfirm) {
                        window.location.replace("/");

                    });
                 closeloading();

                }
                else {
                    closeloading();
                    swal.fire(
                        'هشدار!',
                        data.message,
                        'warning'
                    );
                }
            },
            error: function (request, status, error) {
                closeloading();
                swal.fire(

                    'هشدار!',
                    request.responseText,
                    'warning'
                );
            }
        });
    }
})
</script>
</body>

</html>